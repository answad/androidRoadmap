# StateChanges

### 일부 사용자와 일부 시스템에 의해 발생하는 다양한 이벤트로 인해 Activity가 한 상태에서 다른 상태로 전환되는것

- 상태가 변화하는 과정에서 데이터 손실이 일어날수 있을때 viewModel을 사용해서 데이터를 저장한다

##### 여기선 어떤활동이 상태변화를 일으키는지 설명한다

# Configuration change occurs(구성변경)

- 구성변경을 일으키는 대표적인 원인
    - 디바이스 회전
    - 키보드 상태 변경
    - 화면 크기 변경
    - 다중 창 모드
    - 언어나 테마 변경
- 이러한 구성 변경이 일어나면 액티비티가 삭제되고 다시 생성된다

### 변화

- onPause()
- onStop()
- onDestroy()
- 액티비티의 새 인스턴스가 생성되고 다음 콜백이 트리거됩니다.
- onCreate()
- onStart()
- onResume()

#### 원래의 액티비티 인스턴스는 사라지고 안드로이드 시스템이 새로운 액티비티를 생성한다

# Activity or dialog appears in foreground(활동 또는 대화상자가 포그라운드로 나옴)

- 새 액티비티나 대화상자가 원래의 액티비티 위에 표시되어 포커스를 얻고 진행 중인 액티비티를 **부분적으로** 가리는 경우
    - 가려진 액티비티는 포커스를 잃고 '일시정지된' 상태로 전환
        - 그다음 안드로이드 시스템은 onPause()를 호출함
- 새 액티비티나 대화상자가 원래의 액티비티 위에 표시되어 포커스를 얻고 진행 중인 액티비티를 **완전히** 가리는 경우
    - 가려진 액티비티는 포커스를 잃고 '중지된' 상태로 전환
        - 그다음 안드로이드 시스템은 연속으로 onPause()과 onStop()를 호출한다
- 가려진 액티비티의 인스턴스가 포그라운드로 돌아오는 경우
    - 안드로이드 시스템은 onRestart(), onStart(), onResume()을 호출한다
- 가려진 액티비티의 인스턴스가 삭제된경우
    - onStart()및 onResume()을 호출한다

###### 사용자가 홈 버튼을 탭하면 안드로이드 시스템은 현재 액티비티가 완전히 가려진 것처럼 동작한다

# User taps or gestures Back(사용자가 뒤로가기를 탭했을때)

- 액티비티가 포그라운드에 나와있을때
    - 사용자가 뒤로가기를 탭하면
        - 안드로이드 시스템은 onPause(), onStop(), onDestroy()을 호출하고
            - 액티비티 스택(Tasks)에서 액티비티의 백스택을 지운다
- 기본적으로 액티비티의 진행상태를 저장하지 않는다

# System kills app process(시스템이 앱 프로세스를 종료함)

- 앱이 백그라운드에 있을떄 안드로이드 시스템이 앱 프로세스를 종료할수 있는데 그럴때
    - 시스템이 앱을 종료할 때 앱에서 onDestroy()이 호출된다는 보장이 없으므로 잘 처리해야한다