# Services

- Service는 백그라운드에서 장기적인 작업을 실행할수있는 컴포넌트
- UI가 없고 서비스가 시작되면 사용자가 다른 애플리케이션으로 전환한 후에도 한동안 서비스가 계속 실행될 수 있다
    - 예를 들어 서비스는 백그라운드에서 네트워크 트랜잭션을 처리하고, 음악을 재생하고, 파일 I/O를 실행할수있습니다

# 서비스 유형

### 포그라운드 서비스

- 포그라운드 서비스는 사용자가 인지할수있는 작업을 한다
    - 사용자가 서비스가 실행 중임을 적극적으로 알 수 있도록 알림을 표시해야 한다
        - 포그라운드 서비스는 사용자가 앱과 상호작용하지 않을 때도 계속 실행된다
            - 이 알림은 서비스가 중지될때까지 사라지지않는다

### 백그라운드 서비스

- 백그라운드 서비스는 사용자가 직접 인식하지 못하는 작업을 실행한다
- Service는 주로 장기간 실행되는 작업을 처리하거나, 백그라운드에서 동작해야 하는 작업을 수행한다

# 서비스 VS 스레드

- 사용자와의 상호작용 중에는 애플리케이션의 기본 스레드(UI 스레드)에서 무거운 작업을 수행하면 안 되기 때문에
    - 다른 애플리케이션 에서 새 스레드를 만들어서 작업을 실행해야 한다
- Kotlin 코루틴을 사용하는 것이 좋다
    - 이러한 방법을 사용하면 스레드를 더 효율적으로 관리하고 조정할 수 있다

###### 요약하면 사용자와의 상호작용 중에는 백그라운드에서 실행되어야 하는 작업을 새 스레드에서 처리해야 한다

# 서비스의 함수

- 서비스를 만들려면 Service를 상속받아서 구현한다
    - 구현 시 서비스 수명 주기의 콜백 메서드를 오버라이드하고, 구성요소를 서비스에 바인딩할 수 있는 메커니즘을 제공해야 한다
        - 오버라이드 하는 가장 중요한 콜백 메서드
- onStartCommand()
    - 서비스르 시작할때 시스템은 startService()를 호출한다
    - 이 메서드가 실행되면 서비스가 시작되고 무기한으로 실행될 수 있다
        - 이를 구현하는 경우 작업이 완료될 때 stopSelf() 또는 stopService()를 서비스를 멈추는건 개발자의 책임이다
- onBind()
    - 다른 구성요소가 서비스와 바인딩하길 원하는 경우 시스템은 bindService()을 호출하여 이 메서드를 호출한다
    - 이 메서드를 구현할 때 클라이언트가 IBinder를 반환하여 서비스와 통신하는 데 사용하는 인터페이스를 제공해야 한다
    - 이 메서드는 항상 구현해야 하지만 결합을 허용하지 않으려면 null을 반환해야 한다
- onCreate()
    - 시스템은 서비스가 처음 생성될 때 onStartCommand() 또는 onBind()를 호출하기 전에 이 메서드를 사용하여 서비스를 설정한다
        - 서비스가 이미 실행 중이면 이 메서드가 호출되지 않는다
- onDestroy()
    - 시스템은 서비스가 더 이상 사용되지 않고 소멸될 때 이 메서드를 호출한다
        - 서비스에서 이를 구현하여 스레드, 등록된 리스너 같은 리소스를 정리해야 한다

